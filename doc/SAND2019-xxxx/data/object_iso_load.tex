\label{s:object_iso_load}
To start, we place ourselves in the idealize case where all objects
$O_i\in\mathbf{P}$ have the same load $load(O_i)=\ell$.
Although it is safe to assume that this ideal case will very seldom,
if ever, be encountered in any real case, it is important that any
proposed load-balancing algorithm be able to perform optimally in this
case.

\begin{table}[htb!]
\begin{center}
\begin{tabular}{lcccc}
\hline
statistic & \textbf{optimal} & iteration
& criterion \texttt{6} & criterion \texttt{6'} \\
\hline\hline
\multirow{2}{*}{$\min{\mathcal{L}}$}
&\multirow{2}{*}{$\bf100$}
&$0$ &\multicolumn{2}{c}{$80$} \\
&&$4$ &$99$    &$\bf100$ \\\hline
\multirow{2}{*}{$\max{\mathcal{L}}$}
&\multirow{2}{*}{$\bf100$}
&$0$ &\multicolumn{2}{c}{$123$} \\
&&$4$ &$116$   &$\bf100$ \\\hline
\multirow{2}{*}{$\sigma_{\mathcal{L}}$}
&\multirow{2}{*}{$\bf0.00$}
&$0$ &\multicolumn{2}{c}{$9.18$} \\
&&$4$ &$2.34$  &$\bf0.00$ \\\hline
\multirow{2}{*}{$\mathcal{I}_\mathcal{L}$}
&\multirow{2}{*}{$\bf0.00$}
&$0$ &\multicolumn{2}{c}{$0.23$} \\
&&$4$ &$0.16$  &$\bf0.00$ \\\hline
\end{tabular}
\end{center}
\caption{\label{t:iso-load-divisible}
Load/processor statistics before and after $4$ iterations of the
original and modified algorithms, with $4$ gossiping rounds, in an
iso-load case where $\vert\mathbf{P}\vert$ divides
$\vert\mathbf{O}\vert$.}
\end{table}
Evidently, if $\vert\mathbf{P}\vert$ divides $\vert\mathbf{O}\vert$,
then any  equi-distribution is optimal and is obtained by assigning
exactly $\tfrac{\vert\mathbf{O}\vert}{\vert\mathbf{P}\vert}$ object(s)
to each processor in $\mathbf{P}$.
We therefore present in Table~\ref{t:iso-load-divisible} the
respective results of the 
Grapevine algorithm with both original criterion \texttt{6} (left) and
our modified criterion \texttt{6'}, for a case where
$\mathbf{P}=10^2$, $\mathbf{O}=10^4$, $i=k=f=4$, $t=1.0$, and where
the unit load is chosen to be $\ell=1$.
These results demonstrate that even with small numbers of fanout,
gossiping round, and iterations, our alternatre approach converges to
the optimal solution whereas the original one does not, even with this
simple academic case. This first baseline case is thus discriminating
enough to be retained.

In order to extend the set of baseline cases, we now consider a
slightly broader class of distributions, where all 
objects still have equal load $\ell$, but where it is no longer
required that $\vert\mathbf{P}\vert$ divide $\vert\mathbf{O}\vert$.
In this context, denoting
$q=\lfloor\sfrac{\vert\mathbf{O}\vert}{\vert\mathbf{P}\vert}\rfloor$
and $r=\vert\mathbf{O}\vert\bmod\vert\mathbf{P}\vert$, consider a
distribution of $q$ objects on $\vert\mathbf{P}\vert-r$ processors 
($0\le{r}<\vert\mathbf{P}\vert$ by definition of the Euclidean
division) and $q+1$ objects on the remaining $r$
processors. All objects are indeed assigned because
$r(q+1)+(\vert\mathbf{P}\vert-r)q=r+q\vert\mathbf{P}\vert=\vert\mathbf{O}\vert$.
We thus have, if $r\neq0$ (i.e., in the non-divisible case):
\begin{align*}
\min{\mathcal{L}}
&= q\ell,\\
\max{\mathcal{L}}
&= (q+1)\ell,\\
\overline{\mathcal{L}}
&= \frac{\vert\mathbf{O}\vert}{\vert\mathbf{P}\vert}\ell,
\end{align*}
wherefrom we find that
\[
\mathcal{I}_{\mathcal{L}} =
\frac{q+1}
{\sfrac{\vert\mathbf{O}\vert}{\vert\mathbf{P}\vert}} - 1
=
\frac{q\vert\mathbf{P}\vert + \vert\mathbf{P}\vert
- \vert\mathbf{O}\vert}{\vert\mathbf{O}\vert}
=
\frac{\vert\mathbf{P}\vert - r}{\vert\mathbf{O}\vert}
> 0.
\]
We note that the case where $r=0$, we have instead
\[
\mathcal{I}_{\mathcal{L}} =
\frac{q}
{\sfrac{\vert\mathbf{O}\vert}{\vert\mathbf{P}\vert}} - 1
=
\frac{q\vert\mathbf{P}\vert - \vert\mathbf{O}\vert}
{\vert\mathbf{O}\vert}
= 0,
\]
which amounts to the previously discussed distribution where
$\vert\mathbf{P}\vert$ divides $\vert\mathbf{O}\vert$, that we already
proved to be optimal.

Furthermore, as soon as $r\neq0$, any other distribution assigning
more than $q+1$ objects to at least one processor has
a larger imbalance, because the denominator
$\overline{\mathcal{L}}$ in $\mathcal{I}_{\mathcal{L}}$ is fixed.
Therefore, a distribution $\mathcal{L}$ of
$\vert\mathbf{O}\vert$ objects with identical load $\ell$ across
$\vert\mathbf{P}\vert$ processors is optimal if and only if it can be
written (with no loss of generality, up to a re-indexing of
processors) as follows:
\[
\mathcal{L}=
(q+1)\ell \sum_{i=1}^{r}\delta_i
+ q\ell\!\sum_{i=r+1}^{\vert{\mathbf{P}}\vert}\delta_i.
\]
Because $\delta_i\delta_j=\delta_i$ if $i=j$, and $0$ otherwise, we have
\[
\mathcal{L}^2=
(q+1)^2\ell^2\sum_{i=1}^{r}\delta_i
+ q^2\ell^2\sum_{i=r+1}^{\vert{\mathbf{P}}\vert}\delta_i
\]
as all cross-products vanish, and thus
\[
\overline{\mathcal{L}^2}=
(q+1)^2\ell^2\sum_{i=1}^{r}\overline{\delta_i}
+ q^2\ell^2\sum_{i=r+1}^{\vert{\mathbf{P}}\vert}\overline{\delta_i}
= (q+1)^2\ell^2\frac{r}{\vert{\mathbf{P}}\vert}
+ q^2\ell^2\frac{\vert{\mathbf{P}}\vert-r}{\vert{\mathbf{P}}\vert}
= \frac{\ell^2}{\vert{\mathbf{P}}\vert}
(r + 2qr + q^2\vert{\mathbf{P}}\vert).
\]
This allows us to compute the variance of $\mathcal{L}$, as follows:
\begin{align*}
\sigma_{\mathcal{L}}^2
&= \overline{\mathcal{L}^2} - (\overline{\mathcal{L}})^2\\
&= \frac{\ell^2}{\vert{\mathbf{P}}\vert}
\big(r + 2qr + q^2\vert{\mathbf{P}}\vert\big)
- \frac{\vert\mathbf{O}\vert^2}{\vert\mathbf{P}\vert^2}\ell^2\\
&= \frac{\ell^2}{\vert{\mathbf{P}}\vert^2}
\left[r\vert{\mathbf{P}}\vert + 2qr\vert{\mathbf{P}}\vert
+ q^2\vert{\mathbf{P}}\vert^2 
- (q\vert{\mathbf{P}}\vert+r)^2\right]\\
&= \frac{\ell^2 r(\vert{\mathbf{P}}\vert - r)}
{\vert{\mathbf{P}}\vert^2}
\le \frac{\ell^2}{4},
\end{align*}
with equality if and only if $\mathbf{P}=2r$.
We note that in the particular case where $r=0$, we indeed retrieve
the null variance result.

We thus tested the respective results of the Grapevine algorithm with
both original criterion \texttt{6} and our modified criterion
\texttt{6'} when~$r\neq0$, to assess how those respectively fared as
compared to optimal distributions.
Because the algorithm endowed with the original criterion has already
not been able to obtain an optimal distribution in the easier $r=0$
case, it is safe to expect that it will also not attain an optimal one
in this more complicated case. But it is interesting to test whether
the algorithm equipped with alternate criterion instead still performs
optimally in the case.

\begin{table}[htb!]
\begin{center}
\begin{tabular}{lcccc}
\hline
statistic & \textbf{optimal} & iteration
& criterion \texttt{6} & criterion \texttt{6'} \\
\hline\hline
\multirow{2}{*}{$\min{\mathcal{L}}$}
&\multirow{2}{*}{$\bf39$}
&$0$ &\multicolumn{2}{c}{$23$} \\
&&$4$ &$\bf39$    &$\bf39$ \\\hline
\multirow{2}{*}{$\max{\mathcal{L}}$}
&\multirow{2}{*}{$\bf40$}
&$0$ &\multicolumn{2}{c}{$61$} \\
&&$4$ &$45$   &$\bf40$ \\\hline
\multirow{2}{*}{$\sigma_{\mathcal{L}}$}
&\multirow{2}{*}{$\bf0.2421$}
&$0$ &\multicolumn{2}{c}{$6.182$} \\
&&$4$ &$0.5192$  &$\bf0.2421$ \\\hline
\multirow{2}{*}{$\mathcal{I}_\mathcal{L}$}
&\multirow{2}{*}{$\bf0.024$}
&$0$ &\multicolumn{2}{c}{$0.5616$} \\
&&$4$ &$0.152$  &$\bf0.024$ \\\hline
\end{tabular}
\end{center}
\caption{\label{t:iso-load-not-divisible}
Load/processor statistics before and after $4$ iterations of the
original and modified algorithms, with $4$ gossiping rounds, in an
iso-load case where $\vert\mathbf{P}\vert$ does not divide
$\vert\mathbf{O}\vert$.}
\end{table}
For instance, keeping the same example as above, except 
that now $\mathbf{P}=16^2$, which results in $r=16\neq0$ (and $q=39$),
and the same initial seeding of the sampler, we obtained
the results presented in Table~\ref{t:iso-load-not-divisible},
compared against the optimal statistics computed from the preceding
theoretical results.
We thus observe that once again, while (as expected) the original
algorithm fails to discover an optimal distribution, our version
incorporating modified criterion \texttt{6'} succeeds at doing so.

We therefore propose that the two object iso-load cases (with $r=0$
and with $r\neq0$ be systematically used as baseline test cases for
all distributed load balancers.
